<!DOCTYPE html>
<html lang="en">
<head>
    <title>notetor.com</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="~/Scripts/PhoneCountrySync/css/intlTelInput.css" rel="stylesheet" />
    <link href="/content/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="/content/css/style.css" rel="stylesheet" type="text/css">
    <link href="~/Plugin/mathscribe/jqmath-0.4.3.css" rel="stylesheet" />
    <link href="~/Content/css/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Plugin/mathscribe/jqmath-0.4.3.css" rel="stylesheet" />
    <link href="~/Content/css/drawer.css" rel="stylesheet" />
    <link href="~/Content/css/responsive-website.css" rel="stylesheet" />
    <link href="~/assets/css/xenon-core.css" rel="stylesheet" />
    <link href="~/Content/css/hover.css" rel="stylesheet" />
    <script src="~/Scripts/jquery-1.11.2.min.js"></script>
    <script src="~/Scripts/PhoneCountrySync/js/intlTelInput.js"></script>
    <script src="~/Scripts/PhoneCountrySync/js/utils.js"></script>

    <script>window.MathJax = { MathML: { extensions: ["mml3.js", "content-mathml.js"] } };</script>
    <script>
        var isIE = false;

        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {
            isIE = true;
        }

        if (isIE) {
            $.getScript('//cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML').done(function () {


            });
        }
        else if ($.browser.mozilla == true) {

        }
        else {
            $.getScript('//cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML').done(function () {
                //location.reload(false);

            });
        }
    </script>

    <style>
        .notification-msg {
            color: #3F3D3D;
            text-transform: capitalize;
            font-weight: 400 !important;
        }

        .notification-success {
            border-bottom: 1px solid #cfdff8;
            padding: 8px 0px;
        }

        .login-signup li a:last-child {
            margin-left: 10px;
        }


        .dropdown-menu {
            margin-top: 9px !important;
        }


        .dataTables_wrapper .table thead > tr .sorting, .dataTables_wrapper .table thead > tr .sorting_asc, .dataTables_wrapper .table thead > tr .sorting_desc {
            background: #004293;
            color: #fff;
        }

        .dataTables_filter {
            float: right;
        }

        .pagination {
            float: right;
        }

            .pagination > .active > a, .pagination > .active > a:focus, .pagination > .active > a:hover, .pagination > .active > span, .pagination > .active > span:focus, .pagination > .active > span:hover {
                background-color: #474747;
                border-color: #282829;
            }

            .pagination > li > a, .pagination > li > span {
                color: #666;
            }

        .table.table-bordered > tbody > tr > td {
            border-color: #D6E7FC;
        }

        .notification {
            width: 23px;
            height: 23px;
            background: #004293;
            border-radius: 50%;
            padding: 0;
            line-height: 23px;
            background: #f87f09;
            display: inline-block;
            text-align: center;
            color: #FFF;
        }

        /*#dropDownNotification {
            position: absolute;
            z-index: 9999;
            left: -57px;
            padding: 10px 4px;
        }*/

        .opened {
            background: rgb(255, 255, 255) none repeat scroll 0% 0%;
            padding: 10px;
            border: 1px solid #ccc;
        }

        .notifications li a {
            position: relative;
            display: block;
            padding: 6px 5px;
            color: #666;
            border-bottom: 1px solid #efecec;
            top: 1px;
        }

        .dropdown-menu-list li a i {
        }

        .nav .open > a, .nav .open > a:focus, .nav .open > a:hover {
            background: none;
        }

        .navigation .nav > li > a:hover, .nav > li > a:focus {
            background: none;
        }

        .small {
            display: block;
        }

        .badge.badge-purple {
            background-color: #f9aa09;
        }

        .badge {
            position: absolute;
            font-size: 9px;
            line-height: 13px;
            top: 3px;
            right: 2px;
        }

        .dropdown-menu {
            padding: 0px;
        }

        .login-signup li a:last-child {
            margin-left: 0px;
        }

        .notification-btn {
            padding: 2px 10px;
            font-size: 13px;
            margin-top: 10px;
        }

        .login-signup li a i {
            padding-top: 3px;
        }
    </style>
</head>
<body class="drawer drawer--left">
    <div id="loaderDiv" style="position: fixed; height: 100%; width: 100%; top: 0; left: 0; z-index: 9999; background-color: #fff; text-align: center;">
        <div style="width: 200pt; text-align: center; position: fixed; left: 40%; top: 43%; z-index: 9999999;">
            <img src="/Content/spinner.gif" class="loader-last" style="position: fixed; left: 48%; top: 40%; height: 58px; width: 76px; z-index: 6;" />
        </div>
    </div>
    <input type="hidden" id="loggedInUser" value="@Session["UserId"]" />
    @* <div style="position: fixed; height: 100%; width: 100%; top: 0; left: 0; z-index: 5;  background-color: rgba(225,225,225,0.5); text-align: center" id="loaderDiv">
            <div style="width: 200pt; text-align: center; position: fixed; left: 40%; top: 43%; z-index: 9999999;">
                <img src="/Content/spinner.gif" style="position: fixed; left: 39%; top: 40%; height: 80px; width: 80px; z-index: 6;" />
            </div>
        </div>*@

    <div class="m-menu drawer">
        <header role="banner">
            <button type="button" class="drawer-toggle drawer-hamburger">
                <span class="sr-only">toggle navigation</span>
                <span class="drawer-hamburger-icon"></span>
            </button>

            <nav class="drawer-nav" role="navigation">
                <ul class="drawer-menu">
                    <li class="last">
                        <a href="/User/UserProfile?tab=notebook">
                            <i class="fa fa-book"></i> Notebooks List
                        </a>
                    </li>
                    <li><a href="/Home/Home">Home</a></li>
                    <li><a href="/User/UserProfile">Profile</a></li>
                    <li><a href="/User/UserProfile">Friends</a></li>
                    <li><a href="/Home/FAQ">FAQ'S</a></li>
                    <li><a href="/User/adcreation" id="CreatedAD">Create Ad</a></li>
                    <li><a href="#" style="white-space:nowrap"><i class="fa fa-question" > notetor.com@gmail.com</i></a></li>
                    <li><a href="/User/Setting">Setting</a></li>
                    <li><a href="/User/AccountSettings">Creater's Account</a></li>
                    <li><a href="/Account/Logoff">Logout</a></li>
                </ul>
            </nav>
        </header>
    </div>

    <section class="navigation">
        <div class="container-fluid res-fluid">
            <div class="row">
                <div class="col-md-12">
                    <nav>
                        <div class="navbar-header">
                            @*<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>*@
                            <a class="navbar-brand" href="/Home/Home">
                                <p class="logo">
                                    <img src="~/Content/images/circle-logo.png" class="img-responsive logo-design icon-logo" / style="width:auto;box-shadow: 0px 0px 3px 2px #FFF;border-radius: 50%;">
                                    <img src="/content/images/logo.png" class="img-responsive logo-design textlogo">
                                </p>
                            </a>
                        </div>
                        <div class="col-md-3 col-sm-3  find-frnd-btnpc">
                            <div class="input-group">
                                @if (Session["UserId"] != null)
                                {
                                    <input type="text" class="form-control " id="searchbox" placeholder="Find a Friend....." aria-describedby="searchbox" />
                                    <span class="input-group-addon searchbtn" id="searchbtn" style="cursor: pointer;">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </span>

                                }
                            </div>
                        </div>

                        <div>
                            <ul class="nav navbar-nav navbar-right login-signup">
                                @if (Session["UserId"] != null)
                                {
                                    //if (Session["Role"] != null && Convert.ToInt32(Session["Role"]) == 2)
                                    //{

                                    <li class="submitli" style="margin-left: 7px;">
                                        <a href="/User/NotebookForm" style="padding: 9px 8px;"
                                           class="btn btn-success submit-note-btn">
                                            <i class="fa fa-paper-plane" aria-hidden="true"></i>
                                            Create Notebook
                                        </a>
                                    </li>

                                    @*<li  style="margin-left: 7px;">
                                            <p class="curcode"  id="CurrencyCode"></p>
                                            <input type="hidden" id="rate" value="" />

                                        </li>*@

                                    <li class="row mobile-back mobile-back-pc">
                                        <div class="layout-find-frnd-btnmobile">
                                            <div class="input-group">
                                                @if (Session["UserId"] != null)
                                                {
                                                    <input type="text" class="form-control inputSearch newKeyboard" id="searchbox" placeholder="Find a Friend....." aria-describedby="searchbox">
                                                    <span class="input-group-addon searchbtn" id="searchbtn" style="cursor: pointer;">
                                                        <i class="fa fa-search" aria-hidden="true"></i>
                                                    </span>
                                                }
                                            </div>
                                        </div>
                                    </li>
                                    //}

                                    // Notifications listing starts here

                                    <li class="dropdown hover-line">
                                        <a href="javascript:;" data-toggle="dropdown" onclick="updateIsRead('notificationLi')">
                                            <i class="fa-bell-o" style="position: relative;"></i>
                                            <span class="badge badge-purple notificationCount" id="NotificateCount" style="display: none">0</span>
                                        </a>

                                        <ul class="dropdown-menu invitation">
                                            <li class="top" style="background: rgb(14, 132, 248) none repeat scroll 0% 0%; padding: 12px; margin-bottom: 8px;">
                                                <p class="small" style="color: #fff;">
                                                    You have <strong class="notificationCountP">no</strong> new notifications.
                                                </p>
                                            </li>
                                            <li>
                                                <ul class="dropdown-menu-list list-unstyled notifications notification-list-div"></ul>
                                            </li>
                                            <li class="external">
                                                <a href="/User/NotificationList">
                                                    <span style="color: rgb(18, 82, 194);">View all notifications</span>
                                                    <i class="fa-link-ext"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    // Notifications listing ends here


                                    //FriendRequest listing starts here

                                    <li class="dropdown hover-line">
                                        <a href="javascript:;" data-toggle="dropdown" onclick="updateIsRead('friendLi')">
                                            <i class="fa fa-users" aria-hidden="true"></i>
                                            <span class="badge badge-purple friendCount" id="FriendCount" style="display: none">0</span>
                                        </a>

                                        <ul class="dropdown-menu invitation">
                                            <li class="top" style="background: rgb(14, 132, 248) none repeat scroll 0% 0%; padding: 12px; margin-bottom: 8px;">
                                                <p class="small" style="color: #fff;">
                                                    You have <strong class="friendCountP">no</strong> new Friend requests.
                                                </p>
                                            </li>
                                            <li>
                                                <ul class="dropdown-menu-list list-unstyled friendarequests notification-list-div"></ul>
                                            </li>
                                            <li class="external">
                                                <a href="/User/FriendRequestList">
                                                    <span style="color: rgb(18, 82, 194);">View all pending friend requests </span>
                                                    <i class="fa-link-ext"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>

                                    // Friends Request Ends Here



                                    // Invitation listing starts here
                                    <li class="dropdown hover-line">
                                        <a href="javascript:;" data-toggle="dropdown" onclick="updateIsRead('invitationLi')">
                                            <i class="fa fa-flag-o" aria-hidden="true" style="position: relative;"></i>
                                            <span class="badge badge-purple invitationCount" id="InviteCount" style="display: none">0</span>
                                        </a>

                                        <ul class="dropdown-menu invitation">
                                            <li class="top" style="background: rgb(14, 132, 248) none repeat scroll 0% 0%; padding: 12px; margin-bottom: 8px">
                                                <p class="small" style="color: #fff;">
                                                    You have <strong class="invitationCountP">no</strong> new invitations.
                                                </p>
                                            </li>
                                            <li>
                                                <ul class="dropdown-menu-list list-unstyled invitations notification-list-div"></ul>
                                            </li>
                                            <li class="external">
                                                <a href="/User/InvitationList">
                                                    <span style="color: rgb(18, 82, 194);">View all invitations</span>
                                                    <i class="fa-link-ext"></i>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>

                                    // Invitation listing ends here


                                    <li class="dropdown">
                                        <div id="dLabel" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <div style="margin-top: 4px; float: left;">
                                                <img src="@(!string.IsNullOrEmpty(Convert.ToString(Session["ProfileImage"])) ? Convert.ToString(Session["ProfileImage"]) : "/Content/no-image-available.png")" class="img-circle img-inline userpic-32" width="28">
                                            </div>
                                            <div style="margin-top: 12px; float: right;">
                                                <span style="color: #fff; cursor: pointer;">
                                                    @Session["StudentName"]
                                                </span>
                                                <span class="caret" style="color: #fff; cursor: pointer;"></span>
                                            </div>
                                        </div>
                                        <ul class="dropdown-menu login-tab" aria-labelledby="dLabel">
                                            <li class="last">
                                                <a href="/User/UserProfile?tab=notebook">
                                                    <i class="fa fa-book"></i>  Notebooks List
                                                </a>
                                            </li>

                                            @*<li class="last">
            <a href="/Home/Home">
                <i class="fa fa-book" aria-hidden="true"></i>
                NoteBook List
            </a>
        </li>*@


                                            <li class="last">
                                                <a href="/User/UserProfile?tab=profile">
                                                    <i class="fa fa-user"></i>
                                                    Profile
                                                </a>
                                            </li>
                                            <li class="last">
                                                <a href="/User/UserProfile?tab=frndlist">
                                                    <i class="fa fa-users" aria-hidden="true"></i>
                                                    Friends

                                                </a>
                                            </li>
                                            <li class="last">
                                                <a href="/Home/FAQ">
                                                    <i class="fa fa-gavel" aria-hidden="true"></i>
                                                    FAQ's
                                                </a>
                                            </li>
                                            <li class="last">
                                                <a href="/user/adcreation">
                                                    <i class="fa fa-comments" aria-hidden="true"></i>
                                                    Create Ad
                                                </a>
                                            </li>
                                            @*Help 8787056761*@
                                            <li class="last">
                                                <a href="#">
                                                    <span style="white-space:nowrap"><i class="fa fa-question" aria-hidden="true">  notetor.com@gmail.com</i></span>
                                                    
                                                </a>
                                            </li>
                                            <li class="last">
                                                <a href="/user/Setting">
                                                    <i class="fa fa-wrench" aria-hidden="true"></i>
                                                    Setting
                                                </a>
                                            </li>
                                            <li class="last">
                                                <a href="/User/AccountSettings">
                                                    <i class="fa fa-cog" aria-hidden="true"></i>
                                                    Creator's Account
                                                </a>
                                            </li>
                                            <li class="last">
                                                <a href="/Account/Logoff">
                                                    <i class="fa-lock"></i>
                                                    Logout
                                                </a>
                                            </li>
                                        </ul>
                                    </li>


                                }
                                else
                                {
                                    <li class="loginli" style="margin-right: 8px;">
                                        <a href="/Account/SubmitterRegistration" class="hvr-shutter-out-vertical" style="/*background: #1e99f3; */ background: transparent; border: 1px solid #fff; padding: 6px 20px; margin-top: 6px;">
                                            <i class="fa fa-sign-in" aria-hidden="true"></i>
                                            Log In
                                        </a>
                                    </li>
                                    <li class="signupli">
                                        <a href="/Account/SubmitterRegistration" class="hvr-shutter-out-vertical" style="/*background: #feab03; */ background: transparent; border: 1px solid #fff; padding: 6px 20px; margin-top: 6px;">
                                            <i class="fa fa-user" aria-hidden="true"></i>
                                            Sign Up
                                        </a>
                                    </li>

                                    <li class="submitli" style="margin-left: 8px;">
                                        <a href="/User/NotebookForm" style="padding: 9px 8px; margin-top: 8px;"
                                           class="btn btn-success submit-note-btn ">
                                            <i class="fa fa-paper-plane" aria-hidden="true"></i>
                                            Create Notebook
                                        </a>
                                    </li>

                                }

                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </section>

    <div id="body">

        @RenderSection("featured", required: false)
        <section class="content-wrapper main-content clear-fix">

            @RenderBody()

        </section>
    </div>
</body>
</html>
@*<script src="~/assets/js/jquery.zoomooz.min.js"></script>*@
<script src="~/Content/js/bootstrap.min.js"></script>
<script src="~/Plugin/mathscribe/jscurry-0.4.0.min.js"></script>
<script src="~/Plugin/mathscribe/jqmath-0.4.3.js"></script>
<script src="~/Scripts/Calculator.js"></script>

<script src="~/Content/js/jquery.slimscroll.min.js"></script>
<script src="~/Content/js/datatables/js/jquery.dataTables.min.js"></script>
<script src="~/Content/js/datatables/dataTables.bootstrap.js"></script>


<script src="/Content/js/datatables/tabletools/dataTables.tableTools.min.js"></script>
<link href="/Content/js/datatables/yadcf/jquery.dataTables.yadcf.css" rel="stylesheet" />


<script src="~/assets/js/hy-drawer.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/iScroll/5.2.0/iscroll.min.js"></script>
<script>
    $(document).ready(function () {
        $('.drawer').drawer();
    });
</script>




<script>M.MathPlayer = false; M.trustHtml = true;</script>
<script>
    $(function () {
        M.trustHtml = true;
    });
</script>

<script>
    $(document).ajaxStart(function (event, xhr, settings) {
        //$('#loaderDiv').show();
    });
    $(document).ajaxComplete(function (event, xhr, settings) {
        // setTimeout(function () { $('#loaderDiv').hide(); }, 150);
    });
    $(document).ready(function () {
        $('#loaderDiv').hide();//
        //$("#dropDownNotification").hide();
        $('#InviteCount').hide();
        $('#FriendCount').hide();
        $('#NotificateCount').hide();
        $('input').on('focusout', function () {
            var str = $(this).val();
            $(this).val($.trim(str));
        });
        showNotifications();
        /* window.setInterval(function () {
            showNotifications();
        }, 8000); */

        $('.searchbtn').on('click', function () {
            var SearchText = $(this).prev('input').val();
            console.log(SearchText);
            if (SearchText.length > 0) {
                location.href = "/User/Search?data=" + $.trim(SearchText);
            }
        });


        $(".inputSearch").on('keyup', function (e) {
            if (e.keyCode == 13) {
                $('.searchbtn').click();
            }
        });


        //$(" #notifications ").hover(function () {
        //    $("#dropDownNotification").show();
        //}, function () {
        //    $(".opened").hide();
        //});
    });

    function updateIsRead(type) {
        var xml = '';
        var XML = false;
        if (!XML) {
            xml = "<root>";
            $("." + type + "").each(function () {
                ILId = $(this).attr('data-Id');
                xml += "<InvitationList>";
                xml += "<Id>" + (ILId == null ? '0' : ILId) + "</Id>";
                xml += "</InvitationList>";
            });
            xml += "</root>";
            XML = true;
            $.ajax({
                type: 'POST',
                url: '/User/Invitation_FriendRequest_Notification_List_IsRead_Update',
                data: '{ "XML" : "' + xml + '","Type":"' + type + '"}',      //data: '{ "XML" : "' + xml + '"}',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) { },
                error: function () { },
                global: false,
                complete: function () { }
            })
        }
    }

    function showNotifications() {


        //location.reload(false);


        $.ajax({
            url: '/Home/NotificationsCount',
            type: 'Get',
            data: {},
            dataType: 'json',
            contentType: 'application/json',
            global: false,
            success: function (data) {
                var jsonData = JSON.parse(data);
                if (jsonData.Status == 1) {

                    // FriendsRequests Showing Starts Here
                    if (jsonData.friendRequests.length == 0 || jsonData.friendRequests[0].UnreadNotifications == 0) //
                    {
                        $('#FriendCount').hide();
                        $('#FriendCount').removeClass('badge badge-purple friendCount');
                        $('#FriendCount').html('');
                        $('.friendCountP').html('no');
                    }
                    else {
                        $('#FriendCount').show();
                        $('#FriendCount').addClass('badge badge-purple friendCount');
                        $('.friendCount,.friendCountP').html(jsonData.friendRequests[0].UnreadNotifications);
                    }
                    var element = '';

                    var count = jsonData.friendRequests.length;
                    for (var i = 0; i < count; i++) {
                        if (jsonData.friendRequests[i].Status == 1)
                            element += '<li class="active notification-success friendLi clearfix"><a href="javascript:;" class="notification-msg clearfix"><div class="col-md-3"> <img src="' + jsonData.friendRequests[i].InviterImage + '" class="img-circle img-inline userpic-32"></div> <div class="col-md-9">' + (jsonData.friendRequests[i].Inviter == null ? '' : jsonData.friendRequests[i].Inviter) + ' and you are now friends.</div>';

                        else if (jsonData.friendRequests[i].Status == 2)
                            element += '<li class="active notification-success friendLi clearfix"><a href="javascript:;" class="notification-msg clearfix"><div class="col-md-3"> <img src="' + jsonData.friendRequests[i].InviterImage + '" class="img-circle img-inline userpic-32"></div><div class="col-md-9">You have rejected the request of ' + (jsonData.friendRequests[i].Inviter == null ? '' : jsonData.friendRequests[i].Inviter) + '.</div>';

                        else if (jsonData.friendRequests[i].Status == 3)
                            element += '<li class="active notification-success friendLi clearfix"><a href="javascript:;" class="notification-msg clearfix"> <div class="col-md-3"> <img src="' + jsonData.friendRequests[i].InviterImage + '" class="img-circle img-inline userpic-32" ></div><div class="col-md-9">You have blocked ' + (jsonData.friendRequests[i].Inviter == null ? '' : jsonData.friendRequests[i].Inviter) + '.</div>';

                        else
                            element += '<li class="active notification-success friendLi clearfix" data-Id="' + jsonData.friendRequests[i].FriendRequestId + '"><div class="col-md-3"><img src="'
                                + jsonData.friendRequests[i].InviterImage + '" class="img-circle img-inline userpic-32"> </div><div class="col-md-9" ">'
                                + (jsonData.friendRequests[i].Inviter == null ? '' : jsonData.friendRequests[i].Inviter) + ' has send you a friend request <br/>'
                                + (jsonData.friendRequests[i].CreatedDate == null ? ' ' : jsonData.friendRequests[i].CreatedDate) + '</div><span  style="display:block;float:right;margin-right: 10px;"><input type="button"class="notification-btn btn btn-primary" value="Accept" data-NotificationId="'
                                + jsonData.friendRequests[i].FriendRequestId + '" onclick="UpdateNotificationStatus(this,1,1,\'layout\')"/><input class="notification-btn btn btn-warning" type="button" value="Reject" data-NotificationId="'
                                + jsonData.friendRequests[i].FriendRequestId + '" onclick="UpdateNotificationStatus(this,2,1,\'layout\')"/></span>';
                        //,&#39;' + jsonData.friendRequests[i].InviterImage + '&#39;,&#39;' + (jsonData.friendRequests[i].Inviter == null ? '' : jsonData.friendRequests[i].Inviter) + '&#39;
                        //,&#39;' + jsonData.friendRequests[i].InviterImage + '&#39;,&#39;' + (jsonData.friendRequests[i].Inviter == null ? '' : jsonData.friendRequests[i].Inviter) + '&#39;
                    }
                    $('.friendarequests').html(element);

                    // FriendsRequests Showing Ends Here


                    // Notifications Showing Starts Here
                    if (jsonData.notifications.length == 0 || jsonData.notifications[0].UnreadNotifications == 0) //
                    {
                        $('#NotificateCount').hide();
                        $('#NotificateCount').removeClass('badge badge-purple notificationCount');
                        $('#NotificateCount').html('');
                        $('.notificationCountP').html('no');
                    }
                    else {
                        $('#NotificateCount').show();
                        $('#NotificateCount').addClass('badge badge-purple notificationCount');
                        $('.notificationCount,.notificationCountP').html(jsonData.notifications[0].UnreadNotifications);
                    }


                    var element = '';
                    var count = jsonData.notifications.length;
                    for (var i = 0; i < count; i++) {

                        if (jsonData.notifications[i].Question == null && jsonData.notifications[i].Answer == null) {

                            element += '<li class="active notification-success notificationLi clearfix" data-Id="' + jsonData.notifications[i].NotificationId + '"><a href="/Home/Index?PageId=' + jsonData.notifications[i].PageId + '&BookId=' + (jsonData.notifications[i].BookId == null ? 0 : jsonData.notifications[i].BookId) + '"" class="notification-msg clearfix"><div class="col-md-3"> <img src="'
                                + jsonData.notifications[i].QuestionerImage + '" class="img-circle img-inline userpic-32" > </div><div class="col-md-9">'
                                + jsonData.notifications[i].BookSubmitter + '  added 1 new page in "' + jsonData.notifications[i].BookName + '" <br/> <i class="fa fa-comment-o" aria-hidden="true"></i> ' + (jsonData.notifications[i].createdon == null ? '' : jsonData.notifications[i].createdon) + '</div>';
                        }
                        else {
                            element += '<li class="active notification-success notificationLi clearfix" data-Id="' + jsonData.notifications[i].NotificationId + '"><a href="/Home/Index?PageId=' + jsonData.notifications[i].PageId + '&BookId=' + (jsonData.notifications[i].BookId == null ? 0 : jsonData.notifications[i].BookId) + '"" class="notification-msg clearfix"><div class="col-md-3"> <img src="'
                                + jsonData.notifications[i].QuestionerImage + '" class="img-circle img-inline userpic-32" > </div><div class="col-md-9">'
                                + (jsonData.notifications[i].QuestionerName == null ? '' : jsonData.notifications[i].QuestionerName) + ' ' + (jsonData.notifications[i].Answer == null ? 'Commented ' : 'Answered ') + '  on '
                                + (jsonData.notifications[i].BookName == null ? '' : "'" + jsonData.notifications[i].BookName + "'") + ' created by ' + (jsonData.notifications[i].BookSubmitter == null ? '' : jsonData.notifications[i].BookSubmitter) + ' :- '
                                + (jsonData.notifications[i].Answer == null ? (jsonData.notifications[i].Question == null ? "" : jsonData.notifications[i].Question) : jsonData.notifications[i].Answer) + ' <br/> <i class="fa fa-comment-o" aria-hidden="true"></i> ' + (jsonData.notifications[i].CreatedDate == null ? '' : jsonData.notifications[i].CreatedDate) + '</div>';
                        }
                    }
                    $('.notifications').html(element);

                    // Notifications Showing Ends Here


                    // Invitation Showing Starts Here

                    if (jsonData.data.length == 0 || jsonData.data[0].UnreadNotifications == 0) //
                    {
                        $('#InviteCount').hide();
                        $('#InviteCount').removeClass('badge badge-purple invitationCount');
                        $('#InviteCount').html('');
                        $('.invitationCountP').html('no');
                    }
                    else {
                        $('#InviteCount').show();
                        $('#InviteCount').addClass('badge badge-purple invitationCount');
                        $('.invitationCount,.invitationCountP').html(jsonData.data[0].UnreadNotifications);
                    }


                    var element = '';

                    var count = jsonData.data.length;
                    for (var i = 0; i < count; i++) {

                        if (jsonData.data[i].Status == 1)
                            element += '<li class="active notification-success invitationLi clearfix"><a href="/Home/Index?PageId=' + jsonData.data[i].PageId + '&BookId=' + (jsonData.data[i].BookId == null ? 0 : jsonData.data[i].BookId) + '"" class="notification-msg clearfix"><div class="col-md-3"> <img src="' + jsonData.data[i].InviterImage + '" class="img-circle img-inline userpic-32"></div> <div class="col-md-9"> You have accepted ' + (jsonData.data[i].Inviter == null ? '' : jsonData.data[i].Inviter) + '\'s invitation for the discussion over ' + (jsonData.data[i].BookName == null ? '' : jsonData.data[i].BookName) + ' created by ' + jsonData.data[i].BookSubmitter + ' <br/> <i class="fa fa-user" aria-hidden="true"></i> ' + (jsonData.data[i].DateAccepted == null ? '' : jsonData.data[i].DateAccepted) + '</div>';

                        else if (jsonData.data[i].Status == 2)
                            element += '<li class="active notification-success invitationLi clearfix"><a href="javascript:;" class="notification-msg clearfix"><div class="col-md-3"> <img src="' + jsonData.data[i].InviterImage + '" class="img-circle img-inline userpic-32"></div> <div class="col-md-9" > You have rejected ' + (jsonData.data[i].Inviter == null ? '' : jsonData.data[i].Inviter) + '\'s invitation for the discussion over ' + (jsonData.data[i].BookName == null ? '' : jsonData.data[i].BookName) + ' created by ' + jsonData.data[i].BookSubmitter + ' <br/> <i class="fa fa-user" aria-hidden="true"></i> ' + (jsonData.data[i].DateRejected == null ? '' : jsonData.data[i].DateRejected) + '</div>';

                        else if (jsonData.data[i].Status == 3)
                            element += '<li class="active notification-success invitationLi clearfix"><a href="javascript:;" class="notification-msg clearfix"> <div class="col-md-3"> <img src="' + jsonData.data[i].InviterImage + '" class="img-circle img-inline userpic-32"></div><div class="col-md-9">You have blocked ' + (jsonData.data[i].Inviter == null ? '' : jsonData.data[i].Inviter) + '.</div>';

                        else
                            element += '<li class="active notification-success invitationLi clearfix" data-id="' + jsonData.data[i].InvitationListId + '"><a href="javascript:;" class="notification-msg clearfix"><div class="col-md-3"> <img src="' + jsonData.data[i].InviterImage + '" class="img-circle img-inline userpic-32" > </div><div class="col-md-9">' + (jsonData.data[i].Inviter == null ? '' : jsonData.data[i].Inviter) + ' invites you for the discussion over ' + (jsonData.data[i].BookName == null ? '' : jsonData.data[i].BookName) + ' created by ' + jsonData.data[i].BookSubmitter + ' <br/> <i class="fa fa-user" aria-hidden="true"></i> ' + (jsonData.data[i].CreatedDate == null ? '' : jsonData.data[i].CreatedDate) + '</div><span  style="display:block;float:right;margin-right: 10px;"><input type="button"class="notification-btn btn btn-primary" value="Accept" data-NotificationId="' +
                                jsonData.data[i].InvitationListId + '" onclick="UpdateNotificationStatus(this,1,2,\'layout\')"/><input class="notification-btn btn btn-warning" type="button" value="Deny" data-NotificationId="' +
                                jsonData.data[i].InvitationListId + '" onclick="UpdateNotificationStatus(this,2,2,\'layout\')"/></span>';
                        //,&#39;' + jsonData.data[i].InviterImage + '&#39;,&#39;' + (jsonData.data[i].Inviter == null ? '' : jsonData.data[i].Inviter) + '&#39;
                        //,&#39;' + jsonData.data[i].InviterImage + '&#39;,&#39;' + (jsonData.data[i].Inviter == null ? '' : jsonData.data[i].Inviter) + '&#39;
                    }
                    $('.invitations').html(element);

                    // Invitation Showing Ends Here


                }
                else {
                    $('#NotificateCount').removeClass('badge badge-purple notificationCount');
                    $('#NotificateCount').html('');
                    $('.notificationCountP').html('no');
                    $('#InviteCount').removeClass('badge badge-purple invitationCount');
                    $('#InviteCount').html('');
                    $('.invitationCountP').html('no');
                    $('#FriendCount').removeClass('badge badge-purple invitationCount');
                    $('#FriendCount').html('');
                    $('.friendCountP').html('no');

                }

                /* var isIE = false;

                if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {
                    isIE = true;

                }

                if (isIE) {
                    $('script').each(function () {

                        if (this.src.split('?') === '//cdn.mathjax.org/mathjax/latest/MathJax.js') {

                            $(this).remove();
                        }
                    });
                    window.MathJax = { MathML: { extensions: ["mml3.js", "content-mathml.js"] } };
                    $.getScript('//cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML').done(function () {
                        //location.reload(false);

                    });
                }
                else if ($.browser.mozilla == true) {

                }
                else {
                    $('script').each(function () {

                        if (this.src.split('?') === '//cdn.mathjax.org/mathjax/latest/MathJax.js') {

                            $(this).remove();
                        }
                    });
                    window.MathJax = { MathML: { extensions: ["mml3.js", "content-mathml.js"] } };
                    $.getScript('//cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_HTMLorMML').done(function () {
                        //location.reload(false);

                    });
                } */

            },
            error: function () { },
            complete: function () { }
        })

    }

    function UpdateNotificationStatus(obj, status, Type, from) { //, image, name
        var Id = $(obj).attr('data-NotificationId');
        //alert(Id);
        //return false;
        $.ajax({
            type: 'POST',
            url: '/User/InvitationList_UpdateStatus',
            data: '{ "Id" : "' + Id + '","status":"' + status + '","type":"' + Type + '"}',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            global: false,
            success: function (data) {
                var jsonData = JSON.parse(data);
                if (jsonData.Status == 1) {
                    showNotifications();
                    //if (status == 1)
                    //    showNotifications();
                    //    // $('li[data-Id="' + Id + '"]').html('<a href="javascript:;" class="notification-msg clearfix"><div class="col-md-2"> <img src="' + image + '" class="img-circle img-inline userpic-32" style="width:35px;margin-top: 10px;"></div> <div class="col-md-10" style="text-align: justify;">' + name + ' and you are now friends.</div>');
                    //else
                    //    showNotifications();
                    //    //$('li[data-Id="' + Id + '"]').html('<a href="javascript:;" class="notification-msg clearfix"><div class="col-md-2"> <img src="' + image + '" class="img-circle img-inline userpic-32" style="width:35px;margin-top: 10px;"></div><div class="col-md-10" style="text-align: justify;">You have rejected the request of ' + name + '.</div>');
                }
            },
            error: function () { },
            complete: function () {
                if (from == "Page")
                    window.location.reload();
            }
        })
    }






</script>


